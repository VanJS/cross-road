var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{p as s,P as i}from"./phaser-Cv-xSqVW.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class a extends s.GameObjects.Container{constructor(t,e,s){super(t,e??458,s??144);const i=t.add.tileSprite(0,0,1024,768,"sky_day");i.setOrigin(0,0),i.tintTopLeft=16777215,i.tintTopRight=16777215,i.tintBottomLeft=16777215,i.tintBottomRight=16777215,this.add(i),this.setScrollFactor(0),this.each((t=>{"setScrollFactor"in t&&t.setScrollFactor(0)}))}updateTilePosition(t,e){const s=this.getAt(0);s&&"tilePositionX"in s&&"tilePositionY"in s&&(s.tilePositionX=.3*t,s.tilePositionY=.3*e)}setTilePositionY(t){const e=this.getAt(0);e&&"tilePositionY"in e&&(e.tilePositionY=t)}}class o extends Phaser.Physics.Arcade.Image{constructor(t,s,i,a,o){super(t,s??0,i??0,a||"cloud_shape2_1",o),e(this,"baseHorizontalVelocity"),e(this,"horizontalVelocity"),e(this,"minXPosition"),e(this,"maxXPosition"),e(this,"enablePlatformMovement"),e(this,"speedMultiplier"),e(this,"isOneTime"),e(this,"hasBeenUsed"),e(this,"originalAlpha"),e(this,"originalTint"),this.scaleX=.8,this.scaleY=.5,t.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1,this.body.pushable=!1,this.body.setOffset(0,16),this.body.setSize(272,45,!1),this.baseHorizontalVelocity=50,this.horizontalVelocity=50,this.minXPosition=360,this.maxXPosition=900,this.speedMultiplier=1,this.enablePlatformMovement=!1,this.isOneTime=!1,this.hasBeenUsed=!1,this.originalAlpha=1,this.originalTint=16777215}makeOneTime(){this.isOneTime=!0,this.hasBeenUsed=!1,this.setAlpha(.7),this.setTint(16764108),this.setScale(.8,.5),this.body.enable=!0,this.setVisible(!0)}makeRegular(){this.isOneTime=!1,this.hasBeenUsed=!1,this.setAlpha(this.originalAlpha),this.setTint(this.originalTint),this.setScale(.8,.5),this.body.enable=!0,this.setVisible(!0)}onPlayerLand(){this.isOneTime&&!this.hasBeenUsed&&(this.hasBeenUsed=!0,this.scene.tweens.add({targets:this,alpha:0,scaleX:.6,scaleY:.3,duration:500,ease:"Power2",onComplete:()=>{this.body.enable=!1,this.setVisible(!1)}}))}resetPlatform(t,e,s=!1){this.x=t,this.y=e,s?this.makeOneTime():this.makeRegular()}updateSpeed(t){if(this.speedMultiplier=t,this.horizontalVelocity=this.baseHorizontalVelocity*t,this.enablePlatformMovement&&0!==this.body.velocity.x){const t=this.body.velocity.x>0?1:-1;this.body.velocity.x=this.horizontalVelocity*t}}update(){if(!this.enablePlatformMovement)return;const t=this.body.velocity;this.x<this.minXPosition?t.x=this.horizontalVelocity:this.x>this.maxXPosition&&(t.x=-this.horizontalVelocity)}startPlatformMovement(){this.body.velocity.x=this.horizontalVelocity,this.enablePlatformMovement=!0}stopPlatformMovement(){this.body.velocity.x=0,this.enablePlatformMovement=!1}}class r extends i.GameObjects.Layer{constructor(t){super(t),e(this,"group"),e(this,"maxPlatformDistance"),e(this,"bottomMostPlatformYposition"),e(this,"enableMovingPlatforms",!0),e(this,"currentScore",0),this.group=t.add.group({classType:o,runChildUpdate:!0}),this.group.get(640,640);for(let e=1;e<8;e++){const t=i.Math.Between(360,900),s=-200*e+640;this.group.get(t,s)}this.maxPlatformDistance=1.3*t.scale.height,this.bottomMostPlatformYposition=720}calculateSpeedMultiplier(t){return 1+.3*Math.floor(t/1e3)}updateWithScore(t){this.currentScore=t,this.update();const e=this.calculateSpeedMultiplier(t);this.group.getChildren().forEach((t=>{t.updateSpeed(e)}))}update(){const t=this.scene.cameras.main.scrollY,e=this.group.getChildren().filter((e=>e.y>=t+this.maxPlatformDistance)).sort(((t,e)=>e.y-t.y)),s=this.group.getChildren(),a=s.filter((e=>e.y<t+this.maxPlatformDistance));a.length>0&&(this.bottomMostPlatformYposition=Math.max(...a.map((t=>t.y))));const o=s.map((t=>t.y));let r=Math.min(...o);e.forEach((t=>{const e=i.Math.Between(360,900),s=i.Math.Between(180,220),a=r-s,o=this.shouldMakeOneTime();t.resetPlatform(e,a,o),r=a,this.enableMovingPlatforms&&(1==i.Math.Between(0,1)?t.startPlatformMovement():t.stopPlatformMovement())}))}shouldMakeOneTime(){const t=this.currentScore;if(t<=1500)return!1;const e=Math.floor((t-1500)/500),s=Math.min(20+10*e,80);return i.Math.Between(1,100)<=s}}class h extends Phaser.Physics.Arcade.Sprite{constructor(t,e,s,i,a){super(t,e??0,s??0,i||"duckee_sprite_sheet",a??0),this.scaleX=1.5,this.scaleY=1.5,t.physics.add.existing(this,!1),this.body.checkCollision.up=!1,this.body.setOffset(15,24),this.body.setSize(32,25,!1),this.play("playerIdle")}}class n extends Phaser.Scene{constructor(){super("Level"),e(this,"platformGroupPrefab"),e(this,"player"),e(this,"leftKeyboardKey"),e(this,"rightKeyboardKey"),e(this,"firstJumpMade",!1),e(this,"hasLanded",!1),e(this,"isJumping",!1),e(this,"isGameOver",!1),e(this,"bgm"),e(this,"walkSfx"),e(this,"score",0),e(this,"scoreText"),e(this,"startingY",467),e(this,"gameOverText"),e(this,"restartText"),e(this,"canRestart",!1),e(this,"bgTileSprite"),e(this,"onPlayerLand",((t,e)=>{e.onPlayerLand&&e.onPlayerLand(),this.hasLanded||this.isJumping||(this.hasLanded=!0,this.isJumping=!0,this.player.play("playerLand"),this.walkSfx.play(),this.player.once(Phaser.Animations.Events.ANIMATION_COMPLETE_KEY+"playerLand",(()=>{this.player.play("playerJump"),this.player.setVelocityY(-400),this.firstJumpMade=!0,this.player.once(Phaser.Animations.Events.ANIMATION_COMPLETE_KEY+"playerJump",(()=>{this.player.play("playerSpin"),this.isJumping=!1}))})))})),e(this,"restartGame",(()=>{this.canRestart&&(this.input.keyboard.off("keydown",this.restartGame,this),this.input.off("pointerdown",this.restartGame,this),this.scene.restart())}))}editorCreate(){const t=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT),e=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT),s=new a(this,135,0);this.add.existing(s);const i=new r(this);this.add.existing(i);const o=this.add.layer(),n=new h(this,640,467);n.body.checkCollision.left=!1,n.body.checkCollision.right=!1,o.add(n),this.physics.add.collider(n,i.group,this.onPlayerLand),this.platformGroupPrefab=i,this.player=n,this.leftKeyboardKey=t,this.rightKeyboardKey=e,this.events.emit("scene-awake")}create(){this.editorCreate(),this.bgm=this.sound.add("main-theme",{loop:!0,volume:.2}),this.walkSfx=this.sound.add("walk",{volume:.3}),this.bgm.play(),this.isGameOver=!1,this.cameras.main.startFollow(this.player,!1,.1,1,0,.1),this.cameras.main.setDeadzone(this.scale.width),this.cameras.main.setZoom(1.3),this.firstJumpMade=!1,this.hasLanded=!1,this.isJumping=!1,this.score=0,this.startingY=this.player.y,this.scoreText=this.add.text(900,100,"Score: 0",{fontSize:"22px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:4}),this.scoreText.setScrollFactor(0),this.scoreText.setDepth(1e3),this.gameOverText=this.add.text(640,300,"GAME OVER",{fontSize:"64px",color:"#ff0000",fontFamily:"Arial",stroke:"#000000",strokeThickness:6}),this.gameOverText.setOrigin(.5),this.gameOverText.setScrollFactor(0),this.gameOverText.setDepth(1001),this.gameOverText.setVisible(!1),this.restartText=this.add.text(640,400,"Press any key or click to restart",{fontSize:"24px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:4}),this.restartText.setOrigin(.5),this.restartText.setScrollFactor(0),this.restartText.setDepth(1001),this.restartText.setVisible(!1),this.canRestart=!1}updateScore(){const t=this.startingY-this.player.y;t>this.score&&(this.score=Math.floor(t),this.scoreText.setText(`Score: ${this.score}`))}showGameOver(){this.gameOverText.setVisible(!0),this.restartText.setVisible(!0),this.bgm.stop(),this.time.delayedCall(1e3,(()=>{this.canRestart=!0,this.input.keyboard.on("keydown",this.restartGame,this),this.input.on("pointerdown",this.restartGame,this)}))}update(){const t=this.player.width;this.player.x<320-t/2?this.player.x=940+t/2:this.player.x>940+t/2&&(this.player.x=320-t/2);const e=this.player.body.touching.down;if(e||(this.hasLanded=!1),this.leftKeyboardKey.isDown&&!e&&this.firstJumpMade&&!this.isGameOver?(this.player.setVelocityX(-200),this.player.setFlipX(!0)):this.rightKeyboardKey.isDown&&!e&&this.firstJumpMade&&!this.isGameOver?(this.player.setVelocityX(200),this.player.setFlipX(!1)):this.player.setVelocityX(0),this.isGameOver)return this.player.setVelocityX(0),void this.player.setVelocityY(50);if(this.player.y>this.platformGroupPrefab.bottomMostPlatformYposition+200){if(this.isGameOver=!0,this.player.play("playerHurt"),this.player.setVelocityY(50),this.player.postFX){const t=this.player.postFX.addWipe(.1,0,1);this.tweens.add({targets:t,progress:1,duration:1500,onComplete:()=>{this.player.body.enable=!1,this.showGameOver()}})}}else this.updateScore(),this.platformGroupPrefab.updateWithScore(this.score),this.bgTileSprite&&void 0!==this.bgTileSprite.tilePositionY&&(this.bgTileSprite.tilePositionY=.5*this.player.y)}}class l extends Phaser.Scene{constructor(){super("Preload"),e(this,"progressBar")}editorCreate(){const t=this.add.rectangle(553.0120849609375,361,256,20);t.setOrigin(0,0),t.isFilled=!0,t.fillColor=14737632;const e=this.add.rectangle(553.0120849609375,361,256,20);e.setOrigin(0,0),e.fillColor=14737632,e.isStroked=!0;const s=this.add.text(552.0120849609375,329,"",{});s.text="Loading...",s.setStyle({color:"#e0e0e0",fontFamily:"arial",fontSize:"20px"}),this.progressBar=t,this.events.emit("scene-awake")}preload(){this.editorCreate(),this.load.pack("asset-pack","assets/asset-pack.json?h=20d25cc174630ffb9bb7694d57ed52a6"),this.load.image("logo","assets/logo/logo.png");const t=this.progressBar.width;this.load.on("progress",(e=>{this.progressBar.width=t*e}))}create(){this.scene.start("Start")}}class c extends Phaser.Scene{constructor(){super("Start"),e(this,"canStart",!1),e(this,"startGame",(()=>{this.canStart&&(this.input.keyboard.off("keydown",this.startGame,this),this.input.off("pointerdown",this.startGame,this),this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(()=>{this.scene.start("Level")})))}))}create(){const t=new a(this,135,0);this.add.existing(t);const e=this.add.image(640,300,"logo");e.setScale(.1);const s=this.add.text(640,500,"Press any key or click to start",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:4});s.setOrigin(.5),this.tweens.add({targets:s,alpha:.5,duration:800,ease:"Sine.inOut",yoyo:!0,repeat:-1}),this.tweens.add({targets:e,y:e.y-10,duration:2e3,ease:"Sine.inOut",yoyo:!0,repeat:-1}),this.time.delayedCall(500,(()=>{this.canStart=!0,this.input.keyboard.on("keydown",this.startGame,this),this.input.on("pointerdown",this.startGame,this)}))}}i.Scene,window.addEventListener("load",(function(){const t=new i.Game({width:1280,height:720,backgroundColor:"#2f2f2f",parent:"game-container",scale:{mode:i.Scale.ScaleModes.FIT,autoCenter:i.Scale.Center.CENTER_BOTH},pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{x:0,y:300},debug:!1}}});t.scene.add("Level",n),t.scene.add("Start",c),t.scene.add("Preload",l,!0)}));
